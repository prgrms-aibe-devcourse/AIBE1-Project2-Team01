<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>공고 목록</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}">
</head>
<div class="frame">
    <div class="header">
        <div class="container">
            <div class="container2">
                <div class="logo">logo</div>
            </div>
            <div class="nav">
                <div class="component-1">
                    <div class="text">홈</div>
                </div>
                <div class="link-margin">
                    <div class="component-12">
                        <div class="text2">프로젝트 찾기</div>
                    </div>
                </div>
                <div class="link-margin">
                    <div class="component-12">
                        <div class="text">인재 찾기</div>
                    </div>
                </div>
                <div class="link-margin">
                    <div class="component-12">
                        <div class="text">커뮤니티</div>
                    </div>
                </div>
            </div>
            <div class="container3">
                <div class="component-3">
                    <div class="container4">
                        <div class="container5">
                            <div class="container6">
                                <img class="component-2" src="component-20.svg" />
                            </div>
                        </div>
                    </div>
                </div>
                <div class="button-margin">
                    <div class="component-3">
                        <div class="container4">
                            <div class="container5">
                                <div class="container6">
                                    <img class="component-22" src="component-21.svg" />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="margin">
                    <div class="background">
                        <div class="container7">
                            <div class="container6">
                                <img class="component-23" src="component-22.svg" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="main">
        <div class="heading-1">
            <div class="div">원하는 매치를 찾아 멋진 것을 함께 만들어보세요</div>
        </div>
        <div class="container8">
            <div class="button">
                <div class="div2">시작하기</div>
            </div>
            <div class="button2">
                <div class="div3">프로젝트 탐색</div>
            </div>
        </div>
        <div class="container9">
            <div class="button3">
                <div class="container10">
                    <div class="container11">
                        <div class="container6">
                            <img class="component-24" src="component-23.svg" />
                        </div>
                    </div>
                </div>
                <div class="container5">
                    <div class="div4">카카오로 계속하기</div>
                </div>
            </div>
            <div class="button3">
                <div class="container10">
                    <div class="container11">
                        <div class="container6">
                            <img class="component-25" src="component-24.svg" />
                        </div>
                    </div>
                </div>
                <div class="container5">
                    <div class="div4">구글로 계속하기</div>
                </div>
            </div>
            <div class="button3">
                <div class="container10">
                    <div class="container11">
                        <div class="container6">
                            <img class="component-26" src="component-25.svg" />
                        </div>
                    </div>
                </div>
                <div class="container5">
                    <div class="div4">깃허브로 계속하기</div>
                </div>
            </div>
        </div>
        <form id="filterForm" th:action="@{/projects}" method="get">
        <div class="container12">
            <div class="input">
                <div class="container13">
                    <div class="div5">
                        <input type="text" name="keyword" th:value="${condition.keyword}" placeholder="키워드 입력" />
                    </div>
                </div>
            </div>
            <div class="container14">
                <div class="container7">
                    <div class="container6">
                        <img class="component-27" src="component-26.svg" />
                    </div>
                </div>
            </div>
        </div>
        <div class="container15">
            <div class="button4">
                <div class="container5">
                    <div class="div4">필터 초기화</div>
                </div>
                <div class="container16">
                    <div class="container11">
                        <div class="container6">
                            <img class="component-28" src="component-27.svg" />
                        </div>
                    </div>
                </div>
            </div>
            <div class="container17">
                <div class="button3">
                    <div class="container5">
                        <select name="field" class="select-box">
                            <option value="">관심분야 선택</option>
                            <option value="frontend" th:selected="${condition.field} == 'frontend'">프론트엔드</option>
                            <option value="backend" th:selected="${condition.field} == 'backend'">백엔드</option>
                        </select>
                    </div>
                    <div class="container16">
                        <div class="container11">
                            <div class="container6">
                                <img class="component-29" src="component-28.svg" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container18">
                <div class="button3">
                    <div class="container5">
                        <select name="skillTag" class="select-box">
<!--                            <option value="">기술 스택 선택</option>-->
<!--                            <option th:each="tag : ${tags}"-->
<!--                                    th:value="${tag.name}"-->
<!--                                    th:text="${tag.name}"-->
<!--                                    th:selected="${condition.skillTag} == ${tag.name}">-->
<!--                            </option>-->
                        </select>
                    </div>
                    <div class="container16">
                        <div class="container11">
                            <div class="container6">
                                <img class="component-210" src="component-29.svg" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container19">
                <div class="button3">
                    <div class="container5">
                        <select name="experienceLevel">
                            <option value="BEGINNER" th:selected="${condition.experienceLevel?.contains('BEGINNER')}">입문</option>
                            <option value="INTERMEDIATE" th:selected="${condition.experienceLevel?.contains('INTERMEDIATE')}">중급</option>
                            <option value="ADVANCED" th:selected="${condition.experienceLevel?.contains('ADVANCED')}">고급</option>
                        </select>
                    </div>
                    <div class="container16">
                        <div class="container11">
                            <div class="container6">
                                <img class="component-211" src="component-210.svg" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="button5">
                <div class="container5">
                    <div class="div4"> <button type="submit">검색</button></div>
                </div>
            </div>
<!--            <div class="button12">-->
<!--                <div class="container5">-->
<!--                    <div class="div4"> <button type="submit">검색</button></div>-->
<!--                </div>-->
<!--            </div>-->

            <div class="container20">
                <div class="button3">
                    <div class="container5">
                        <select name="type">
                            <option value="project" th:selected="${condition.type?.contains('project')}">프로젝트</option>
                            <option value="competition" th:selected="${condition.type?.contains('competition')}">대회</option>
                        </select>
                    </div>
                    <div class="container16">
                        <div class="container11">
                            <div class="container6">
                                <img class="component-212" src="component-211.svg" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        </form>
        <div class="container21">
            <div class="button3">
                <div class="container5">
                    <div class="div4">
                        <select id="sortSelect" name="sortBy">
                            <option value="최신순" selected>최신순</option>
                            <option value="오래된순">오래된순</option>
                        </select>
                    </div>
                </div>
                <div class="container16">
                    <div class="container11">
                        <div class="container6">
                            <img class="component-213" src="component-212.svg" />
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="button6">
            <div class="container5">
                <button class="status-filter" data-status="모집중">모집중</button>
            </div>
        </div>
        <div class="button7">
            <div class="container5">
                <button class="status-filter"data-status="완료">완료</button>
            </div>
        </div>
        <div class="button8">
            <div class="container5">
                <button class="status-filter"data-status="진행중">진행중</button>
            </div>
        </div>
<!--        <button class="status-filter" data-status="모집중">모집중</button>-->
<!--        <button class="status-filter" data-status="진행중">진행중</button>-->
<!--        <button class="status-filter" data-status="완료">완료</button>-->


        <div class="heading-2">
            <div class="div6">전체 프로젝트</div>
          </div>


            <div id="project-list" class="project-list" th:fragment="projectList">
            <div class="project-list-container">
                <div th:each="project : ${projects}" class="project-card">
                    <div class="card-inner">
                        <div class="card-header">
                            <img src="component-213.svg" class="card-icon" />
                            <div class="card-title-section">
                                <div class="title" th:text="${project.title}">프로젝트 제목</div>
                                <div class="type-location" th:text="${project.type} + ' · ' + ${project.locationType}">유형 · 위치</div>
                            </div>
                        </div>
                        <div class="card-description" th:text="${project.description}">설명</div>
                        <div class="card-actions">
                            <a th:href="@{'/projects/detail?projectId=' + ${project.projectId}}" class="view-btn">보기</a>
                            <a th:href="@{'/projects/apply?projectId=' + ${project.projectId}}" class="apply-btn">지원</a>

                        </div>
                    </div>
                </div>
            </div>
        </div>


<!--                        <div class="project-list-container" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 1.5rem;">-->
<!--        <div class="container22" th:each="project : ${projects}">-->
<!--            <div class="background-border-shadow">-->
<!--                <div class="container23">-->
<!--                    <div class="container24">-->
<!--                        <div class="background2">-->
<!--                            <div class="container2">-->
<!--                                <div class="container6">-->
<!--                                    <img class="component-214" src="component-213.svg" />-->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                        <div class="container2">-->
<!--                            <div class="heading-3">-->
<!--                                <div class="title" th:text="${project.title}">프로젝트 제목</div>-->
<!--                            </div>-->
<!--                            <div class="container25">-->
<!--                                <div class="div7" th:text="${project.type} + ' · ' + ${project.locationType}">프로젝트 · 원격</div>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                    <div class="container25">-->
<!--                        <div class="div8" th:text="${project.description}">프로젝트 설명</div>-->
<!--                    </div>-->
<!--                    <div class="container26">-->
<!--&lt;!&ndash;                        <div class="background3" th:each="tag : ${project.skillTags}">&ndash;&gt;-->
<!--&lt;!&ndash;                            <div th:text="${tag.name}">기술스택</div>&ndash;&gt;-->

<!--                        </div>-->
<!--                    </div>-->
<!--                    <div class="container27">-->
<!--                        <div class="button9">-->
<!--                            <a th:href="@{/projects/{id}(id=${project.projectId})}" class="div9">보기</a>-->
<!--                        </div>-->
<!--                        <div class="button10">-->
<!--                            <a th:href="@{/projects/apply/{id}(id=${project.projectId})}" class="div10">지원</a>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
        <div class="heading-22">
            <div class="div12">추천 프로젝트</div>
        </div>
        <div class="container29">
            <div class="background-border-shadow7">
                <div class="container23">
                    <div class="container24">
                        <div class="background2">
                            <div class="container2">
                                <div class="container6">
                                    <img class="component-220" src="component-219.svg" />
                                </div>
                            </div>
                        </div>
                        <div class="container2">
                            <div class="heading-3">
                                <div class="div11">네온 테스커</div>
                            </div>
                            <div class="container25">
                                <div class="div7">프로젝트 · 원격</div>
                            </div>
                        </div>
                    </div>
                    <div class="container25">
                        <div class="react-figma">
                            창의적인 웹앱 협업 개발입니다. React와 Figma를 잘 다루세요.
                        </div>
                    </div>
                    <div class="container26">
                        <div class="background3">
                            <div class="react">React</div>
                        </div>
                        <div class="background3">
                            <div class="figma">Figma</div>
                        </div>
                        <div class="background3">
                            <div class="div13">웹개발</div>
                        </div>
                    </div>
                    <div class="container27">
                        <div class="button9">
                            <div class="div9">보기</div>
                        </div>
                        <div class="button10">
                            <div class="div10">지원</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="background-border-shadow7">
                <div class="container23">
                    <div class="container24">
                        <div class="background2">
                            <div class="container2">
                                <div class="container6">
                                    <img class="component-221" src="component-220.svg" />
                                </div>
                            </div>
                        </div>
                        <div class="container2">
                            <div class="heading-3">
                                <div class="div11">어트랙티오</div>
                            </div>
                            <div class="container25">
                                <div class="div7">프로젝트 · 서울</div>
                            </div>
                        </div>
                    </div>
                    <div class="container25">
                        <div class="div8">
                            모바일 김시스코 디자인 앱스토어리뉴얼을 진행해요.
                        </div>
                    </div>
                    <div class="container26">
                        <div class="background3">
                            <div class="ui-ux">UI/UX</div>
                        </div>
                        <div class="background3">
                            <div class="div13">모바일</div>
                        </div>
                        <div class="background3">
                            <div class="div13">디자인</div>
                        </div>
                    </div>
                    <div class="container27">
                        <div class="button9">
                            <div class="div9">보기</div>
                        </div>
                        <div class="button10">
                            <div class="div10">지원</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="background-border-shadow7">
                <div class="container23">
                    <div class="container24">
                        <div class="background2">
                            <div class="container2">
                                <div class="container6">
                                    <img class="component-222" src="component-221.svg" />
                                </div>
                            </div>
                        </div>
                        <div class="container2">
                            <div class="heading-3">
                                <div class="div11">브랜드포스트</div>
                            </div>
                            <div class="container25">
                                <div class="div7">프로젝트 · 하이브리드</div>
                            </div>
                        </div>
                    </div>
                    <div class="container25">
                        <div class="div8">
                            중견급 마케터가 참여하는 시장을 위한 플랫폼을 찾습니다.
                        </div>
                    </div>
                    <div class="container26">
                        <div class="background3">
                            <div class="div13">마케팅</div>
                        </div>
                        <div class="background3">
                            <div class="div13">기획</div>
                        </div>
                        <div class="background3">
                            <div class="div13">전략</div>
                        </div>
                    </div>
                    <div class="container28">
                        <div class="button9">
                            <div class="div9">보기</div>
                        </div>
                        <div class="button10">
                            <div class="div10">지원</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="heading-23">
            <div class="div12">인기 포트폴리오</div>
        </div>
        <div class="container30">
            <div class="background-border-shadow7">
                <div class="background4">
                    <div class="container31">
                        <div class="container6">
                            <img class="component-223" src="component-222.svg" />
                        </div>
                    </div>
                </div>
                <div class="container32">
                    <div class="heading-3">
                        <div class="div14">최고 포트폴리오</div>
                    </div>
                    <div class="container25">
                        <div class="div15">박 서아</div>
                    </div>
                    <div class="container33">
                        <div class="_12-5">
                            수상 경력의 일러스트레이터와 애니메이터, 12개 프로젝트, 5개의 협업
                        </div>
                    </div>
                    <div class="button11">
                        <div class="div9">보기</div>
                    </div>
                </div>
            </div>
            <div class="background-border-shadow7">
                <div class="background4">
                    <div class="container31">
                        <div class="container6">
                            <img class="component-224" src="component-223.svg" />
                        </div>
                    </div>
                </div>
                <div class="container32">
                    <div class="heading-3">
                        <div class="div14">금상수 스타</div>
                    </div>
                    <div class="container25">
                        <div class="div15">최 도어</div>
                    </div>
                    <div class="container33">
                        <div class="_14">
                            창의적인 브랜드에 14년 동안을 가진 웹 소스 개발자.
                        </div>
                    </div>
                    <div class="button11">
                        <div class="div9">보기</div>
                    </div>
                </div>
            </div>
            <div class="background-border-shadow7">
                <div class="background4">
                    <div class="container31">
                        <div class="container6">
                            <img class="component-225" src="component-224.svg" />
                        </div>
                    </div>
                </div>
                <div class="container32">
                    <div class="heading-3">
                        <div class="div14">창의적</div>
                    </div>
                    <div class="container25">
                        <div class="div15">임 태화</div>
                    </div>
                    <div class="container33">
                        <div class="div8">
                            브랜드 디자이너 &amp; 비주얼 스토리텔러, 문화적 주제 특화
                        </div>
                    </div>
                    <div class="button11">
                        <div class="div9">보기</div>
                    </div>
                </div>
            </div>
        </div>

    </div>
    <div class="footer">
        <div class="container34">
            <div class="container35">
                <div class="container2">
                    <div class="logo">logo</div>
                </div>
                <div class="container36">
                    <div class="component-1">
                        <div class="text3">서비스 소개</div>
                    </div>
                    <div class="component-1">
                        <div class="text3">이용약관</div>
                    </div>
                    <div class="component-13">
                        <div class="text3">개인정보처리방침</div>
                    </div>
                    <div class="component-1">
                        <div class="text3">고객센터</div>
                    </div>
                </div>
            </div>
            <div class="container37">
                <div class="_2025-logo">© 2025 logo. 모든 권리 보유.</div>
            </div>
        </div>

    </div>
</div>


</html>

<script>
    function fetchFilteredProjects() {
        const status = document.querySelector(".status-filter.active")?.dataset.status || '';
        const sortBy = document.getElementById("sortSelect")?.value || '';

        // 쿼리스트링 구성
        const queryParams = new URLSearchParams();
        if (status) queryParams.append('status', status);
        if (sortBy) queryParams.append('sortBy', sortBy);

        fetch('/projects/filter?' + queryParams.toString())
            .then(res => res.text())
            .then(html => {
                document.getElementById("project-list").innerHTML = html;
            })
            .catch(err => console.error("Ajax fetch error", err));
    }

    // 정렬 셀렉트박스 변경 시
    document.getElementById("sortSelect")?.addEventListener("change", () => {
        fetchFilteredProjects();
    });

    // 모집 상태 버튼 클릭 시
    document.querySelectorAll(".status-filter").forEach(btn => {
        btn.addEventListener("click", function () {
            document.querySelectorAll(".status-filter").forEach(b => b.classList.remove("active"));
            this.classList.add("active");
            fetchFilteredProjects();
        });
    });
</script>

